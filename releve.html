<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>/* Reset CSS */
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        body {
          font-family: Arial, sans-serif;
        }
        
        .report {
          width: 210mm;
          height: 297mm;
          margin: 0 auto;
          padding: 10mm;
          background-color: #fff;
          font-size: 12px;
          border: 2px dashed #000;
        }
        
        .page {
          width: 100%;
          height: 100%;
          display: flex;
          flex-direction: column;
          justify-content: space-between;
        }
        
        .subpage {
          margin: 0 auto;
          text-align: center;
        }
        
        .header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
        }
        
        .header .ministere,
        .header .ministry-english {
          font-weight: bold;
          font-size: 12px;
        }
        
        .school-info {
          font-size: 10px;
          text-align: left;
          line-height: 1.4;
          margin-top: 10px;
        }
        
        .school-logo {
          width: 80px;
          height: 80px;
          border-radius: 50%;
        }
        
        .titre-bulletin {
          margin: 20px auto;
          width: 50%;
          height: 30px;
          line-height: 30px;
          border: 3px solid #000;
          background-color: #f0f0f0;
          font-size: 16px;
          font-weight: bold;
          text-transform: uppercase;
        }
        
        .student-info {
          display: flex;
          justify-content: space-between;
          align-items: flex-start;
          margin-top: 20px;
        }
        
        .student-photo {
          width: 100px;
          height: 100px;
          border-radius: 50%;
          overflow: hidden;
        }
        
        .student-photo img {
          width: 100%;
          height: 100%;
          object-fit: cover;
        }
        
        .info-left,
        .info-right {
          flex: 1;
          text-align: left;
          padding: 10px;
        }
        
        .info-right {
          text-align: right;
        }
        
        .info-left p,
        .info-right p {
          margin-bottom: 5px;
          font-size: 12px;
        }
        
        .notes-table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 20px;
        }
        
        .notes-table th,
        .notes-table td {
          border: 1px solid #000;
          padding: 8px;
        }
        
        .notes-table th {
          text-align: center;
          background-color: #f0f0f0;
        }
        
        .additional-info {
          display: flex;
          justify-content: space-between;
          margin-top: 20px;
        }
        
        .info-block {
          flex-basis: 23%;
          text-align: center;
          padding: 10px;
          border: 1px solid #eee;
          background-color: #f0f0f0;
          border-radius: 10px;
        }
        
        .info-block-title {
          font-weight: bold;
          text-transform: uppercase;
          margin-bottom: 10px;
        }
        
        .info-block-data {
          margin-bottom: 5px;
          font-size: 12px;
          font-weight: bold;
        }
        
        .council-decisions {
          margin-top: 20px;
          text-align: left;
        }
        
        .decision-title {
          font-weight: bold;
          text-transform: uppercase;
          margin-bottom: 10px;
        }
        
        .decision-item {
          display: flex;
          align-items: center;
          margin-bottom: 5px;
        }
        
        .decision-item input[type="checkbox"] {
          margin-right: 10px;
        }
        
        .final-block {
          display: flex;
          justify-content: space-between;
          margin-top: 20px;
        }
        
        .final-item {
          width: 30%;
          text-align: center;
        }
        
        .final-rectangle {
          border: 1px solid #d4d4d4;
          background-color: #f0f0f0;
          padding: 5px;
          font-weight: bold;
          text-transform: uppercase;
        }
        
        .signature-box {
          height: 80px;
          border: 1px solid #d4d4d4;
          display: flex;
          flex-direction: column;
          justify-content: center;
        }
        
        .signature-line {
          font-weight: bold;
        }
        </style>
    <title>Relevé de notes</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>
  </head>

  <body>
    <div class="report">
      <div class="page">
        <div class="subpage">
          <!-- En-tête et informations de l'école -->
          <div class="header-left">
            <div class="ministere">
              MINISTÈRE DES ENSEIGNEMENTS SECONDAIRES
            </div>
            <div class="school-info">
              ******************
              <br />
              NOM DE L'ÉCOLE
              <br />
              DÉVISE DE L'ECOLE
              <br />
              BP 1038, YAOUNDÉ - CAMEROUN
              <br />
              Tel: +237 XXXXXXX / +237 YYYYYYYY
            </div>
          </div>

          <div class="header-center">
            <!-- Logo de l'école -->
            <img src="https://8e88574f1c4ccff60147f8042d186225.cdn.bubble.io/f1710195333223x770432881526755600/logo%20awae%20bilingual%20school.png?_gl=1*1k662ef*_gcl_au*MTA1NzY3NDY1NC4xNzA4OTg0NTg1*_ga*MjAzNzkzNzUwNC4xNzA4OTg0NTgw*_ga_BFPVR2DEE2*MTcxMDE5MTA2Mi4xNC4xLjE3MTAyNTIwMjUuNDIuMC4w"
              alt="Logo de l'école" class="school-logo" />
          </div>

          <div class="header-right">
            <div class="ministry-english">
              MINISTRY OF SECONDARY EDUCATION
            </div>
            <div class="school-info">
              ******************
              <br />
              SCHOOL NAME
              <br />
              SCHOOL MOTTO
              <br />
              PoBox: 1038, YAOUNDE - CAMEROON
              <br />
              Tel: +237 XXXXXXX / +237 YYYYYYYY
            </div>
          </div>

          <!-- Titre du bulletin -->
          <div class="titre-bulletin">
            Bulletin de notes du premier trimestre
          </div>

          <!-- Informations de l'élève -->
          <div class="student-info">
            <div class="info-left">
              <p>Nom & Prénom : <b>Oumarou Maïmouna</b></p>
              <p>Sexe : <b>Féminin</b></p>
              <p>Né(e) le : <b>13/03/2010 - xx ans</b></p>
              <p>Lieu : <b>Kousseri</b></p>
              <p>Matricule : <b>1584HBHJ</b></p>
            </div>
            <div class="student-photo">
              <img src="https://8e88574f1c4ccff60147f8042d186225.cdn.bubble.io/f1709312118604x705345548196993900/femme%20noire.jpeg?_gl=1*1a748f5*_gcl_au*MTA1NzY3NDY1NC4xNzA4OTg0NTg1*_ga*MjAzNzkzNzUwNC4xNzA4OTg0NTgw*_ga_BFPVR2DEE2*MTcxMzk0ODAzNy40Ni4xLjE3MTM5NTE1MzUuNjAuMC4w"
                alt="Photo de l'élève" class="student-image" />
            </div>
            <div class="info-right">
              <p>Redoublant(e) : <b>Non</b></p>
              <p>Classe : <b>3ème Allemand</b></p>
              <p>Effectif : <b>23</b></p>
              <p>Année Scolaire : <b>2023/2024</b></p>
              <p>Prof. Principal(e) : <b>Mme Youmbi Sophie</b></p>
            </div>
          </div>

          <!-- Tableau des notes -->
          <div class="notes-wrapper">
            <table class="notes-table">
              <tr>
                <th>MATIÈRES</th>
                <th>COEF</th>
                <th>SEQ 1</th>
                <th>SEQ 2</th>
                <th>MOY</th>
                <th>N * C</th>
                <th>RANG</th>
                <th>APPRECIATION ET COMP. DÉVELOPPÉES</th>
                <th>VISA</th>
              </tr>
              <!-- Lignes de la table des notes générées dynamiquement -->
            </table>
          </div>

          <!-- Informations supplémentaires -->
          <div class="additional-info">
            <!-- Blocs d'informations -->
          </div>

          <!-- Décisions du conseil -->
          <div class="council-decisions">
            <!-- Bloc de décisions -->
          </div>

          <!-- Blocs finaux -->
          <div class="final-block">
            <!-- Blocs finaux -->
          </div>

          <!-- Note: Ce document est invalide sans le cachet et/ou la signature du chef d'établissement. -->
        </div>
      </div>
    </div>

    <button id="download-pdf">Télécharger le PDF</button>

    <!-- Script JavaScript pour générer la table des notes -->
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        generateNotesTable("1er trimestre");
      });

      function generateNotesTable(periode) {
        // Simulez ici la récupération des données à partir d'une API ou d'une source de données
        // Voici un exemple simplifié de structure de données JSON
        let notesData = {
          matieres: ["Français", "Mathématiques", "Physique", "Chimie"],
          coefficients: [3, 4, 2, 2],
          sequences: {
            "SEQ 1": [12, 15, 9, 13],
            "SEQ 2": [14, 14, 10, 12],
          },
          appreciations: [
            "Bonne compréhension des concepts.",
            "Excellente participation en classe.",
            "Nécessite une amélioration dans les domaines clés.",
            "Très bonne progression ce trimestre."
          ],
          rangs: ["12", "7", "15", "2"],
          visas: [
            "url_signature_mme_sophie.jpg",
            "url_signature_m_tchoumi.jpg",
            "url_signature_mme_lucie.jpg",
            "url_signature_m_ngombe.jpg"
          ]
        };

        let table = document.querySelector(".notes-table");

        // Ajouter les lignes de données
        notesData.matieres.forEach((matiere, index) => {
          let row = table.insertRow(-1);
          row.insertCell(-1).textContent = matiere;
          row.insertCell(-1).textContent = notesData.coefficients[index];

          Object.keys(notesData.sequences).forEach(seq => {
            row.insertCell(-1).textContent = notesData.sequences[seq][index];
          });

          let moyenne = (notesData.sequences["SEQ 1"][index] + notesData.sequences["SEQ 2"][index]) / 2;
          row.insertCell(-1).textContent = moyenne.toFixed(1);
          row.insertCell(-1).textContent = (moyenne * notesData.coefficients[index]).toFixed(1);
          row.insertCell(-1).textContent = notesData.rangs[index];
          row.insertCell(-1).textContent = notesData.appreciations[index];

          // Insérer une cellule pour le visa (à remplacer par le code pour l'image du visa)
          let visaCell = row.insertCell(-1);
          let visaImg = document.createElement("img");
          visaImg.src = notesData.visas[index];
          visaImg.alt = "Visa";
          visaImg.classList.add("visa-image");
          visaCell.appendChild(visaImg);
        });
      }

      // Téléchargement du PDF
      document.getElementById("download-pdf").addEventListener("click", function() {
        const reportElement = document.querySelector
